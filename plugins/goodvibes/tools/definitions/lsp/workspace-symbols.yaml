name: workspace_symbols
version: "1.0.0"
description: |
  Search for symbols by name across the entire workspace with semantic awareness.
  Unlike grep, this distinguishes between a function named `foo` vs a variable named `foo`.
  Uses TypeScript Language Service's getNavigateToItems for accurate symbol search.

category: lsp
tags:
  - typescript
  - javascript
  - symbols
  - search
  - navigation
  - workspace

mcp:
  server: goodvibes-tools
  method: workspace_symbols
  defer_loading: true

inputSchema:
  type: object
  properties:
    query:
      type: string
      description: Symbol name or partial name to search for
    kind:
      type: string
      description: Filter by symbol kind (default all)
      enum: [all, class, interface, function, variable, type, enum, method, property, module]
    limit:
      type: integer
      description: Maximum number of results (default 50, max 200)
      default: 50
    match_type:
      type: string
      description: How to match the query (default substring)
      enum: [exact, prefix, substring]
      default: substring
  required:
    - query

outputSchema:
  type: object
  properties:
    symbols:
      type: array
      items:
        type: object
        properties:
          name:
            type: string
            description: Symbol name
          kind:
            type: string
            description: Symbol kind (class, function, interface, variable, etc.)
          file:
            type: string
            description: File path relative to project root
          line:
            type: number
            description: Line number (1-based)
          column:
            type: number
            description: Column number (1-based)
          container_name:
            type: string
            description: Name of the containing class/module (if any)
          match_kind:
            type: string
            description: How the symbol matched (exact, prefix, substring)
    query:
      type: string
      description: The search query used
    count:
      type: number
      description: Number of symbols found
    truncated:
      type: boolean
      description: Whether results were truncated due to limit

handler:
  type: native
  module: lsp
  function: handleWorkspaceSymbols

examples:
  - description: "Search for all symbols containing User"
    input:
      query: "User"
    output:
      symbols:
        - name: "User"
          kind: "interface"
          file: "src/types.ts"
          line: 10
          column: 1
          container_name: ""
          match_kind: "exact"
        - name: "UserService"
          kind: "class"
          file: "src/services/user.ts"
          line: 5
          column: 1
          container_name: ""
          match_kind: "prefix"
      query: "User"
      count: 2
      truncated: false

  - description: "Search for class symbols only"
    input:
      query: "Service"
      kind: "class"
    output:
      symbols:
        - name: "UserService"
          kind: "class"
          file: "src/services/user.ts"
          line: 5
          column: 1
          container_name: ""
          match_kind: "prefix"
      query: "Service"
      count: 1
      truncated: false
